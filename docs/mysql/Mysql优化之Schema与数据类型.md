#Mysql优化之Schema与数据类型
## 选择优化的数据类型
Mysql支持的数据类型非常多，选择正确的数据类型对于获得高性能很重要，下面是一些参考原则：
- 更小的通常更好
    一般情况下，应该尽量使用可以正确存储数据的最小数据类型。更小的数据类型通常一般更快，因为占用更少的磁盘，内存和CPU缓存，并且处理时需要CPU周期也更少
- 简单就好
    简单数据类型的操作通常需要更少的CPU周期。例如：整型比字符串操作代价更低，因为字符集和校对规则（排序规则）使字符比较比整型比较更复杂。例子：应该使用mysql内建的类型而不是字符串来存储日期和时间，应该使用整型类存储IP地址。
- 尽量避免NULL
    很多表都包含可为NULL的列，即使应用程序并不需要保存null也是如此。这是因为可为null是列的默认属性。通常情况下最好指定列为`NOT NULL`，除非真的需要存储`NULL`值。
    如果查询中包含可为NULL的列，对mysql来说更难优化，因为可为NULL的列使的索引、索引统计和值比较更复杂。可为NULL的列会使用更多的存储空间。在mysql中也需要特殊的处理。
    当可为NULL的列被索引时，每个索引记录需要一个额外的字节，MyISAM里甚至还可能导致固定大小的索引变为可变大小的索引。如果需要在列上建索引，就应该避免设计为可为NULL的列。
    在我们选择时间类型的时候，timestamp类型和datatime都可以存储相同类型的数据：时间和日期，精确到秒。按时timestamp的所占的存储空间是datetime的一半，并且timestamp会根据时区的变化而变化，具有自动更新的能力。
    另外，timestamp允许的范围要小很多。
- mysql 为了兼容性支持别名，但是mysql查询的时候还是基于基本类型的。我们可以使用show命令查询创建表的详细信息
    ```MYSQL
        SHOW CREATE TABLE mytable;
    ```
## Mysql中的数据类型
- 整数类型
    - 整型：存储整数，可以使用如下类型：TINYINT，SMALLINT，MEDIUMINT，Bigint。
  整数类型有可选的UNSIGNED，表示不能为负值。这个可以使正数的上线提高一倍。有符号和无符号使用相同的存储空间。并具有相同的性能。整数计算一般使用64位的bigint整数。
    - 实数类型：实数是具有小数部分的数值。然而，它们不只是为了存储小数部分，也可以使用DECIMAL存储比BIGINT还大的整数。mysql支持精度类型，也支持不精确类型。
  float和double类型支持使用标准的浮点运算进行近似计算。DECIMAL类型用于存储精确的小数。支持精确计算。浮点和DECIMAL类型都可以指定精度，对于DECIMAL列，可以指定小数点前后所允许的最大位数。这会影响列的空间消耗。
  因为DECIMAL需要更多的存储空间，因此尽量少用DECIMAL，除非要进行精确计算。当数据量比较大是，可以使用bigint进行代替，乘以相应的倍数进行存储即可。
- 字符串类型
    
-BLOB和TEXT类型
- 枚举（ENUM）类型
- 日期和时间类型
- 位数据类型
- JSON类型
